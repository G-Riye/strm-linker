<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>扫描配置功能测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .form-group {
            margin: 10px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>扫描配置功能测试</h1>
    
    <div class="test-section info">
        <h2>功能说明</h2>
        <p>这个测试页面用于验证扫描配置管理功能的实现情况：</p>
        <ul>
            <li>✅ 扫描配置管理页面已创建</li>
            <li>✅ 目录浏览功能已集成</li>
            <li>✅ 自定义扩展名支持</li>
            <li>✅ 配置保存和加载</li>
            <li>✅ 与定时任务集成</li>
        </ul>
    </div>

    <div class="test-section success">
        <h2>已实现的功能</h2>
        <h3>1. 扫描配置管理页面 (ScanConfigs.vue)</h3>
        <ul>
            <li>✅ 配置列表展示</li>
            <li>✅ 创建/编辑配置对话框</li>
            <li>✅ 目录浏览功能（已集成DirectoryBrowser组件）</li>
            <li>✅ 自定义视频和元数据扩展名</li>
            <li>✅ 执行配置（预览和执行）</li>
            <li>✅ 删除配置</li>
            <li>✅ 执行结果展示</li>
        </ul>

        <h3>2. API接口 (api/index.js)</h3>
        <ul>
            <li>✅ 扫描配置管理API</li>
            <li>✅ 扩展名管理API</li>
            <li>✅ 配置执行API</li>
        </ul>

        <h3>3. 路由和导航</h3>
        <ul>
            <li>✅ 添加了/scan-configs路由</li>
            <li>✅ 导航菜单已更新</li>
        </ul>

        <h3>4. 定时任务集成</h3>
        <ul>
            <li>✅ 支持选择保存的扫描配置</li>
            <li>✅ 动态表单显示</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>目录浏览功能测试</h2>
        <p>点击"浏览"按钮现在会打开目录浏览器对话框，而不是显示"功能待实现"的提示。</p>
        
        <div class="form-group">
            <label for="test-directory">测试目录路径：</label>
            <input type="text" id="test-directory" placeholder="点击浏览按钮选择目录" readonly>
            <button onclick="simulateBrowse()">浏览</button>
        </div>
        
        <p><strong>功能特点：</strong></p>
        <ul>
            <li>✅ 支持Windows和Linux路径</li>
            <li>✅ 驱动器选择（Windows）</li>
            <li>✅ 路径导航面包屑</li>
            <li>✅ 目录搜索功能</li>
            <li>✅ 显示STRM文件标识</li>
            <li>✅ 响应式设计</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>使用流程</h2>
        <ol>
            <li><strong>创建扫描配置：</strong>
                <ul>
                    <li>点击"扫描配置"页面</li>
                    <li>点击"新建配置"</li>
                    <li>填写配置名称和描述</li>
                    <li>点击"浏览"按钮选择目录</li>
                    <li>设置递归扫描选项</li>
                    <li>添加自定义扩展名</li>
                    <li>保存配置</li>
                </ul>
            </li>
            <li><strong>执行配置：</strong>
                <ul>
                    <li>在配置列表中点击"预览"或"执行"</li>
                    <li>查看执行结果和统计信息</li>
                </ul>
            </li>
            <li><strong>定时任务中使用：</strong>
                <ul>
                    <li>在"定时任务"页面添加新任务</li>
                    <li>开启"使用扫描配置"开关</li>
                    <li>选择已保存的扫描配置</li>
                    <li>设置调度参数</li>
                </ul>
            </li>
        </ol>
    </div>

    <script>
        function simulateBrowse() {
            // 模拟目录浏览功能
            const testPaths = [
                'C:\\Users\\Documents\\Movies',
                '/home/user/videos',
                'D:\\Media\\TV Shows',
                '/mnt/media/movies'
            ];
            
            const randomPath = testPaths[Math.floor(Math.random() * testPaths.length)];
            document.getElementById('test-directory').value = randomPath;
            
            alert('模拟目录浏览：已选择路径 ' + randomPath + '\n\n在实际应用中，这会打开DirectoryBrowser组件对话框。');
        }
    </script>
</body>
</html>
